{%- assign thumb_size = 240 -%}
{%- assign ext = include.path | split:'.' | last | downcase -%}
{%- assign is_video = false -%}
{%- if ext == "mp4" or ext == "webm" or ext == "ogg" -%}
  {%- assign is_video = true -%}
{%- endif -%}
<figure class="media-thumb" style="width:{{ thumb_size }}px; height:{{ thumb_size }}px; margin:auto; display:flex; align-items:center; justify-content:center; overflow:hidden; background:transparent;">
  {% if is_video %}
    <div style="position:relative; width:100%; height:100%; display:flex; align-items:center; justify-content:center; background:transparent;">
      <video 
        src="{{ include.path | relative_url }}"
        width="{{ thumb_size }}" height="{{ thumb_size }}"
        style="width:100%; height:100%; object-fit:contain; border-radius:8px; background:transparent; display:block;"
        muted playsinline preload="metadata" poster="{{ include.poster | relative_url }}"
        autoplay>
      </video>
    </div>
  {% else %}
    <img 
      src="{{ include.path | relative_url }}"
      width="{{ thumb_size }}" height="{{ thumb_size }}"
  style="width:100%; height:100%; object-fit:contain; border-radius:8px; display:block; background:transparent;"
      {% if include.alt %}alt="{{ include.alt }}"{% endif %}
      {% if include.title %}title="{{ include.title }}"{% endif %}
    />
  {% endif %}
  {%- if include.caption -%}
    <figcaption class="caption" style="text-align:center;">{{ include.caption | markdownify }}</figcaption>
  {%- endif -%}
</figure>